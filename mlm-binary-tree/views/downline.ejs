<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Downline - MLM</title>
  <link rel="stylesheet" href="/styles.css">
  <style>
    .tree { font-family: monospace; white-space: pre; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Downline Tree</h1>
    <% function renderNode(node, indent) { %>
      <% if (!node) { %>
        <%= '' %>
      <% } else { %>
        <div style="margin-left:<%= indent %>px;">
          <strong><%= node.member_code %></strong> - <%= node.name %> (L:<%= node.left_count %> R:<%= node.right_count %>)
        </div>
        <% if (node.left) { %>
          <%= renderNode(node.left, indent + 20) %>
        <% } %>
        <% if (node.right) { %>
          <%= renderNode(node.right, indent + 20) %>
        <% } %>
      <% } %>
    <% } %>

    <% if (!tree) { %>
      <p>No downline found.</p>
    <% } else { %>
      <div class="tree"><%= renderNode(tree, 0) %></div>
    <% } %>

    <p><a href="/dashboard">Back</a></p>
  </div>
</body>
</html>
